import{F as a,i as e,L as t}from"./styles-fggh1L1L.js";import{_ as s,a as r,e as l,k as i,B as n,f as o,p as u,m,s as c,c as p,y as v,z as d,A as g,o as h,n as w,t as f,i as y,F as x,g as H}from"./index-BLN5naFk.js";const T={class:"temperature-page femel-bg"},k={class:"chart-section"},C={class:"status-tip"},L={ref:"chartRef",style:{width:"100%",height:"340px"}},F={class:"stats-row"},b={class:"stat-value"},S={class:"stat-value"},_={class:"stat-value"},B={class:"temperature-cards"},A={class:"card-title"},M={class:"card-content"},N={class:"highlight"},I={class:"warning-container"},R={class:"warning-message"};const W=s({name:"Temperature",components:{FemalCard:a},setup(){const a=c(null);let s=null,r=null;const l=c(""),i=c({value:0,status:"Normal"}),n=c({average:0,min:0,max:0}),o=c([]),u=a=>a<35.5?"Hypothermia":a>=38?"High Fever":a>=37.5?"Low Fever":a<36?"Low":a>37.2?"High":"Normal",m=p((()=>"Normal"===i.value.status?"status-normal":"High Fever"===i.value.status||"Low Fever"===i.value.status||"High"===i.value.status?"status-high":"Hypothermia"===i.value.status||"Low"===i.value.status?"status-low":"")),h=p((()=>"Normal"===i.value.status?"Temperature is normal, keep it up!":"High Fever"===i.value.status?"High fever warning, please seek medical attention.":"Low Fever"===i.value.status?"Low fever, please rest and drink more water.":"Hypothermia"===i.value.status?"Temperature is too low, please keep warm.":"High"===i.value.status?"Temperature is slightly high, please monitor.":"Low"===i.value.status?"Temperature is slightly low, please keep warm.":"")),w=async()=>{try{localStorage.getItem("token");const a=(await g.getTemperature()).data;o.value=a;const e=a.map((a=>[a.timestamp,a.temperature]));if(a&&a.length>0){const e=a[a.length-1];i.value.value=e.temperature,i.value.status=u(e.temperature),e.warning&&(l.value=e.warning);const t=a.map((a=>a.temperature)),s=(t.reduce(((a,e)=>a+e),0)/t.length).toFixed(2),r=Math.min(...t).toFixed(2),o=Math.max(...t).toFixed(2);n.value={average:s,min:r,max:o}}else n.value={average:0,min:0,max:0};s.setOption({series:[{data:e}]})}catch(a){}};return v((()=>{(()=>{if(a.value){s=e(a.value);const r={tooltip:{trigger:"axis",formatter:function(a){const e=a[0];return`${e.name}<br/>Temperature: ${e.value}°C`}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:{type:"value",name:"Temperature (°C)",min:35,max:42,splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"Temperature",type:"line",smooth:!0,data:[],itemStyle:{color:"#7EB8A2"},areaStyle:{color:new t(0,0,0,1,[{offset:0,color:"rgba(126, 184, 162, 0.3)"},{offset:1,color:"rgba(126, 184, 162, 0.1)"}])}}]};s.setOption(r)}})(),w(),r=setInterval(w,3e4)})),d((()=>{s&&s.dispose(),r&&clearInterval(r)})),{chartRef:a,latestWarning:l,latest:i,healthStatusTip:h,statusColor:m,goBack:()=>{window.location.hash="",window.location.pathname="/metrics"},stats:n,temperatureList:o,getHealthStatus:u}}},[["render",function(a,e,t,s,c,p){const v=m("FemalCard"),d=m("el-card"),g=m("el-col"),W=m("el-row");return h(),r("div",null,[l("button",{class:"back-btn",onClick:e[0]||(e[0]=(...a)=>s.goBack&&s.goBack(...a))},"Back to Home"),l("div",T,[i(v,{title:"Temperature Monitoring"},{default:u((()=>[l("div",k,[l("div",C,[l("i",{class:w(["ri-thermometer-line status-icon",s.statusColor])},null,2),l("span",{class:w(["status-text",s.statusColor])},f(s.healthStatusTip),3)]),l("div",L,null,512)])])),_:1}),l("div",F,[i(v,{variant:"soft",class:"stat-card"},{default:u((()=>[e[2]||(e[2]=l("div",{class:"stat-icon stat-icon-main"},[l("i",{class:"ri-thermometer-line"})],-1)),e[3]||(e[3]=l("div",{class:"stat-label"},"Average Temperature",-1)),l("div",b,[y(f(s.stats.average)+" ",1),e[1]||(e[1]=l("span",null,"°C",-1))])])),_:1}),i(v,{variant:"soft",class:"stat-card"},{default:u((()=>[e[5]||(e[5]=l("div",{class:"stat-icon stat-icon-low"},[l("i",{class:"ri-arrow-down-line"})],-1)),e[6]||(e[6]=l("div",{class:"stat-label"},"Minimum Temperature",-1)),l("div",S,[y(f(s.stats.min)+" ",1),e[4]||(e[4]=l("span",null,"°C",-1))])])),_:1}),i(v,{variant:"soft",class:"stat-card"},{default:u((()=>[e[8]||(e[8]=l("div",{class:"stat-icon stat-icon-high"},[l("i",{class:"ri-arrow-up-line"})],-1)),e[9]||(e[9]=l("div",{class:"stat-label"},"Maximum Temperature",-1)),l("div",_,[y(f(s.stats.max)+" ",1),e[7]||(e[7]=l("span",null,"°C",-1))])])),_:1})]),l("div",B,[e[12]||(e[12]=l("h3",null,"Recent Temperature Records (Cards)",-1)),i(W,{gutter:20},{default:u((()=>[(h(!0),r(x,null,H(s.temperatureList,(a=>(h(),n(g,{span:12,key:a.timestamp},{default:u((()=>[i(d,{class:"temperature-card"},{default:u((()=>[l("div",A,[e[10]||(e[10]=l("i",{class:"ri-thermometer-line"},null,-1)),y(" "+f(new Date(a.timestamp).toLocaleString()),1)]),l("div",M,[e[11]||(e[11]=y(" Temperature: ")),l("span",N,f(a.temperature)+" °C",1),"Normal"!==s.getHealthStatus(a.temperature)?(h(),r("span",{key:0,class:w(["warning-indicator",s.getHealthStatus(a.temperature).toLowerCase().replace(" ","-")])}," ⚠️ "+f(s.getHealthStatus(a.temperature)),3)):o("",!0)])])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),s.latestWarning?(h(),n(v,{key:0,variant:"soft"},{default:u((()=>[l("div",I,[e[13]||(e[13]=l("div",{class:"warning-icon"},"⚠️",-1)),l("div",R,f(s.latestWarning),1)])])),_:1})):o("",!0)])])}],["__scopeId","data-v-a27aee31"]]);export{W as default};
