import{q as a,_ as s,N as e,a as t,k as l,e as n,m as o,F as i,g as r,v as c,p as u,s as d,x as p,o as h,n as v,f as y,t as g,i as m}from"./index-BLN5naFk.js";const I={ask:async s=>(await a.post("http://120.76.249.191:8000/chatbot/ask",{message:s})).data},b={class:"bg-gradient"},f={class:"container"},A={class:"chat-section",ref:"chatSection"},k={key:0,class:"avatar"},w={class:"role"},x={class:"content"},H={class:"input-section"};const M=s({name:"Messages",components:{NavBar:e},setup(){const a=d([{role:"ai",content:"Hello, I am your AI health assistant. How can I help you?"}]),s=d(""),e=d(!1),t=d(null),l=()=>{p((()=>{t.value&&(t.value.scrollTop=t.value.scrollHeight)}))};return{chatHistory:a,userInput:s,loading:e,sendMessage:async()=>{if(!s.value.trim())return;const t=s.value;a.value.push({role:"user",content:t}),s.value="",e.value=!0,l();try{const s=await I.ask(t);let e=s;if("object"==typeof s&&s.response)e=s.response;else if("string"==typeof s&&s.startsWith("{"))try{e=JSON.parse(s).response||s}catch{e=s}a.value.push({role:"ai",content:e})}catch(n){a.value.push({role:"ai",content:"AI service is temporarily unavailable, please try again later."})}finally{e.value=!1,l()}},chatSection:t}}},[["render",function(a,s,e,d,p,I){const M=o("NavBar"),C=o("el-input"),N=o("el-button");return h(),t("div",b,[l(M),n("div",f,[s[3]||(s[3]=n("div",{class:"header"},[n("h1",null,"AI Chat Assistant"),n("p",{class:"subtitle"},"Chat with AI health assistant to get health advice or answers.")],-1)),n("div",A,[(h(!0),t(i,null,r(d.chatHistory,((a,e)=>(h(),t("div",{key:e,class:v(["chat-row",a.role])},["ai"===a.role?(h(),t("div",k,s[1]||(s[1]=[n("img",{src:"/assets/AI-BLZGGWKU.jpg",alt:"AI Assistant",class:"avatar-img"},null,-1)]))):y("",!0),n("div",{class:v(["chat-bubble",a.role])},[n("span",w,g("user"===a.role?"Me":"AI"),1),n("span",x,g(a.content),1)],2)],2)))),128))],512),n("div",H,[l(C,{modelValue:d.userInput,"onUpdate:modelValue":s[0]||(s[0]=a=>d.userInput=a),placeholder:"Please enter your question...",autosize:{minRows:2,maxRows:4},type:"textarea",class:"chat-input",onKeyup:c(d.sendMessage,["enter","native"]),disabled:d.loading},null,8,["modelValue","onKeyup","disabled"]),l(N,{type:"primary",onClick:d.sendMessage,loading:d.loading,class:"send-btn"},{default:u((()=>s[2]||(s[2]=[m("Send")]))),_:1},8,["onClick","loading"])])])])}],["__scopeId","data-v-d3e6e858"]]);export{M as default};
