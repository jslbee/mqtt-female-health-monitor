import{q as e,_ as a,N as t,a as l,k as r,e as i,m as d,f as o,p as s,r as c,s as n,o as u,i as p,t as m}from"./index-BLN5naFk.js";const v="http://120.76.249.191:8000",y={async predictNextPeriod(a){var t,l;try{return(await e.post(`${v}/predict`,{last_period_date:a})).data}catch(r){throw new Error((null==(l=null==(t=r.response)?void 0:t.data)?void 0:l.detail)||"预测服务出错")}},getClientIds:async()=>(await e.get(`${v}/client_ids`)).data},g={class:"prediction-container"},f={class:"input-section"},P={key:0,class:"result-section"},h={class:"prediction-content"},D={key:1,class:"error-message"};const _=a({name:"Prediction",components:{NavBar:t},setup(){const e=c({lastPeriodDate:""}),a=n(null),t=n(!1),l=n(""),r=n(""),i=n("");return{predictionForm:e,predictionResult:a,loading:t,error:l,predictionDate:r,averageCycle:i,getPrediction:async()=>{if(e.lastPeriodDate){t.value=!0,l.value="";try{const t=await y.predictNextPeriod(e.lastPeriodDate);let l=t;"object"==typeof t&&t.result&&(l=t.result);const d=l.match(/(\d{4}-\d{2}-\d{2})/),o=l.match(/average cycle of approximately (\d+) days/);r.value=d?d[1]:"",i.value=o?o[1]:"",a.value=l}catch(d){l.value=d.message}finally{t.value=!1}}else l.value="Please select the last period date"}}}},[["render",function(e,a,t,c,n,v){const y=d("NavBar"),_=d("el-date-picker"),w=d("el-form-item"),Y=d("el-button"),C=d("el-form"),x=d("el-card"),k=d("el-alert");return u(),l("div",null,[r(y),i("div",g,[a[3]||(a[3]=i("h2",null,"Menstrual Cycle Prediction",-1)),i("div",f,[r(C,{model:c.predictionForm,"label-width":"120px"},{default:s((()=>[r(w,{label:"Last Period Date"},{default:s((()=>[r(_,{modelValue:c.predictionForm.lastPeriodDate,"onUpdate:modelValue":a[0]||(a[0]=e=>c.predictionForm.lastPeriodDate=e),type:"date",placeholder:"Select date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),r(w,null,{default:s((()=>[r(Y,{type:"primary",onClick:c.getPrediction,loading:c.loading},{default:s((()=>a[1]||(a[1]=[p(" Predict Next Period ")]))),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model"])]),c.predictionResult?(u(),l("div",P,[r(x,{class:"prediction-card"},{header:s((()=>a[2]||(a[2]=[i("div",{class:"card-header"},[i("span",null,"Prediction Result")],-1)]))),default:s((()=>[i("div",h,[i("p",null,"Predicted Date: "+m(c.predictionDate),1),i("p",null,"Average Cycle: "+m(c.averageCycle)+" days",1)])])),_:1})])):o("",!0),c.error?(u(),l("div",D,[r(k,{title:c.error,type:"error","show-icon":""},null,8,["title"])])):o("",!0),a[4]||(a[4]=i("div",{class:"aesthetic-image-container"},[i("img",{src:"/assets/woman-C_sRYWrd.jpg",alt:"Peaceful woman illustration",loading:"lazy",class:"aesthetic-image"})],-1))])])}],["__scopeId","data-v-781c4be3"]]);export{_ as default};
