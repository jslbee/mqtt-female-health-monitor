import{F as a,i as t,L as e}from"./styles-fggh1L1L.js";import{_ as s,a as l,e as r,k as i,p as o,m as n,s as c,c as u,y as d,z as m,A as h,o as v,n as p,t as g,i as f,F as H,g as w,B as x,f as _}from"./index-BLN5naFk.js";const R={class:"heart-rate-page femel-bg"},y={class:"chart-section"},k={class:"status-tip"},b={ref:"chartRef",style:{width:"100%",height:"340px"}},B={class:"stats-row"},M={class:"stat-value"},S={class:"stat-value"},C={class:"stat-value"},L={class:"heart-rate-cards"},F={class:"card-title"},P={class:"card-content"},N={class:"highlight"};const A=s({name:"HeartRate",components:{FemalCard:a},setup(){const a=c(null);let s=null,l=null;const r=c({average:0,min:0,max:0}),i=c({value:0,status:"Normal"}),o=c([]),n=a=>a<60?"Low":a>100?"High":"Normal",v=u((()=>"Normal"===i.value.status?"status-normal":"High"===i.value.status?"status-high":"Low"===i.value.status?"status-low":"")),p=u((()=>"Normal"===i.value.status?"Heart rate is normal, keep it up!":"High"===i.value.status?"Heart rate is high, take some rest and relax.":"Low"===i.value.status?"Heart rate is low, pay attention to nutrition and exercise.":"")),g=async()=>{try{localStorage.getItem("token");const a=(await h.getHeartRate()).data;o.value=a;const t=a.map((a=>[a.timestamp,a.heart_rate]));if(a&&a.length>0){const t=a[a.length-1];i.value.value=t.heart_rate,i.value.status=n(t.heart_rate);const e=a.map((a=>a.heart_rate)),s=(e.reduce(((a,t)=>a+t),0)/e.length).toFixed(2),l=Math.min(...e).toFixed(2),o=Math.max(...e).toFixed(2);r.value={average:s,min:l,max:o}}else r.value={average:0,min:0,max:0};s.setOption({series:[{data:t}]})}catch(a){}};return d((()=>{(()=>{if(a.value){s=t(a.value);const l={tooltip:{trigger:"axis",formatter:function(a){const t=a[0];return`${t.name}<br/>Heart Rate: ${t.value} BPM`}},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}"}},yAxis:{type:"value",name:"Heart Rate (BPM)",min:40,max:120},series:[{name:"Heart Rate",type:"line",smooth:!0,data:[],itemStyle:{color:"#E57C9F"},areaStyle:{color:new e(0,0,0,1,[{offset:0,color:"rgba(229, 124, 159, 0.3)"},{offset:1,color:"rgba(229, 124, 159, 0.1)"}])}}]};s.setOption(l)}})(),g(),l=setInterval(g,3e4)})),m((()=>{s&&s.dispose(),l&&clearInterval(l)})),{chartRef:a,stats:r,latest:i,healthStatusTip:p,statusColor:v,goBack:()=>{window.location.hash="",window.location.pathname="/metrics"},heartRateList:o,getHealthStatus:n}}},[["render",function(a,t,e,s,c,u){const d=n("FemalCard"),m=n("el-card"),h=n("el-col"),A=n("el-row");return v(),l("div",null,[r("button",{class:"back-btn",onClick:t[0]||(t[0]=(...a)=>s.goBack&&s.goBack(...a))},"Back to Home"),r("div",R,[i(d,{title:"Heart Rate Monitoring"},{default:o((()=>[r("div",y,[r("div",k,[r("i",{class:p(["ri-heart-pulse-fill status-icon",s.statusColor])},null,2),r("span",{class:p(["status-text",s.statusColor])},g(s.healthStatusTip),3)]),r("div",b,null,512)])])),_:1}),r("div",B,[i(d,{variant:"soft",class:"stat-card"},{default:o((()=>[t[2]||(t[2]=r("div",{class:"stat-icon stat-icon-main"},[r("i",{class:"ri-heart-pulse-line"})],-1)),t[3]||(t[3]=r("div",{class:"stat-label"},"Average Heart Rate",-1)),r("div",M,[f(g(s.stats.average)+" ",1),t[1]||(t[1]=r("span",null,"BPM",-1))])])),_:1}),i(d,{variant:"soft",class:"stat-card"},{default:o((()=>[t[5]||(t[5]=r("div",{class:"stat-icon stat-icon-low"},[r("i",{class:"ri-arrow-down-line"})],-1)),t[6]||(t[6]=r("div",{class:"stat-label"},"Minimum Heart Rate",-1)),r("div",S,[f(g(s.stats.min)+" ",1),t[4]||(t[4]=r("span",null,"BPM",-1))])])),_:1}),i(d,{variant:"soft",class:"stat-card"},{default:o((()=>[t[8]||(t[8]=r("div",{class:"stat-icon stat-icon-high"},[r("i",{class:"ri-arrow-up-line"})],-1)),t[9]||(t[9]=r("div",{class:"stat-label"},"Maximum Heart Rate",-1)),r("div",C,[f(g(s.stats.max)+" ",1),t[7]||(t[7]=r("span",null,"BPM",-1))])])),_:1})]),r("div",L,[t[12]||(t[12]=r("h3",null,"Recent Heart Rate Records (Cards)",-1)),i(A,{gutter:20},{default:o((()=>[(v(!0),l(H,null,w(s.heartRateList,(a=>(v(),x(h,{span:12,key:a.timestamp},{default:o((()=>[i(m,{class:"heart-rate-card"},{default:o((()=>[r("div",F,[t[10]||(t[10]=r("i",{class:"ri-heart-pulse-line"},null,-1)),f(" "+g(new Date(a.timestamp).toLocaleString()),1)]),r("div",P,[t[11]||(t[11]=f(" Heart Rate: ")),r("span",N,g(a.heart_rate)+" BPM",1),"Normal"!==s.getHealthStatus(a.heart_rate)?(v(),l("span",{key:0,class:p(["warning-indicator",s.getHealthStatus(a.heart_rate).toLowerCase()])}," ⚠️ "+g(s.getHealthStatus(a.heart_rate)),3)):_("",!0)])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])])}],["__scopeId","data-v-a91640ef"]]);export{A as default};
